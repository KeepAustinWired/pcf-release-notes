---
title: Pivotal Application Service v2.4 Release Notes
owner: Release Engineering
---

Pivotal Cloud Foundry is certified by the Cloud Foundry Foundation for <%= Date.today.year %>.

Read more about the [certified provider program](https://www.cloudfoundry.org/provider-faq/) and the [requirements of providers](https://www.cloudfoundry.org/provider-requirements/).

<hr>

## <a id='releases'></a> Releases

### <a id='2.4.0-rc.3'></a> 2.4.0-rc.3

* **[Bug Fix]** Fix issue preventing tiles that depend on the deprecated consul BOSH link from being deployed successfully with PAS
* Bump cf-smoke-tests to version `40.0.40`
* Bump cflinuxfs2 to version `1.253.0`
* Bump cflinuxfs3 to version `0.44.0`
* Bump consul-drain to version `0.0.3`

<table border="1" class="nice">
  <thead>
    <tr>
      <th>Component</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>ubuntu-xenial stemcell</td><td>170.9</td></tr>
    <tr><td>backup-and-restore-sdk</td><td>1.10.0</td></tr>
    <tr><td>binary-offline-buildpack</td><td>1.0.27</td></tr>
    <tr><td>bosh-dns-aliases</td><td>0.0.3</td></tr>
    <tr><td>bosh-system-metrics-forwarder</td><td>0.0.16</td></tr>
    <tr><td>bpm</td><td>0.13.0</td></tr>
    <tr><td>capi</td><td>1.72.2</td></tr>
    <tr><td>cf-autoscaling</td><td>215</td></tr>
    <tr><td>cf-backup-and-restore</td><td>0.0.11</td></tr>
    <tr><td>cf-cli</td><td>1.9.0</td></tr>
    <tr><td>cf-networking</td><td>2.18.2</td></tr>
    <tr><td>cf-smoke-tests</td><td>40.0.40</td></tr>
    <tr><td>cf-syslog-drain</td><td>8.0</td></tr>
    <tr><td>cflinuxfs2</td><td>1.253.0</td></tr>
    <tr><td>cflinuxfs3</td><td>0.44.0</td></tr>
    <tr><td>consul-drain</td><td>0.0.3</td></tr>
    <tr><td>consul</td><td>198</td></tr>
    <tr><td>credhub</td><td>2.1.2</td></tr>
    <tr><td>diego</td><td>2.22.0</td></tr>
    <tr><td>dotnet-core-offline-buildpack</td><td>2.2.0</td></tr>
    <tr><td>garden-runc</td><td>1.16.7</td></tr>
    <tr><td>go-offline-buildpack</td><td>1.8.29</td></tr>
    <tr><td>haproxy</td><td>9.3.0</td></tr>
    <tr><td>java-offline-buildpack</td><td>4.16.1</td></tr>
    <tr><td>log-cache</td><td>2.0.1</td></tr>
    <tr><td>loggregator-agent</td><td>2.2</td></tr>
    <tr><td>loggregator</td><td>103.3</td></tr>
    <tr><td>mapfs</td><td>1.1.2</td></tr>
    <tr><td>metric-registrar</td><td>1.0.4</td></tr>
    <tr><td>mysql-monitoring</td><td>9.1.0</td></tr>
    <tr><td>nats</td><td>26</td></tr>
    <tr><td>nfs-volume</td><td>1.7.4</td></tr>
    <tr><td>nodejs-offline-buildpack</td><td>1.6.34</td></tr>
    <tr><td>notifications-ui</td><td>36</td></tr>
    <tr><td>notifications</td><td>54</td></tr>
    <tr><td>php-offline-buildpack</td><td>4.3.64</td></tr>
    <tr><td>push-apps-manager-release</td><td>667.0.2</td></tr>
    <tr><td>push-usage-service-release</td><td>668.0.10</td></tr>
    <tr><td>pxc</td><td>0.14.0</td></tr>
    <tr><td>python-offline-buildpack</td><td>1.6.23</td></tr>
    <tr><td>routing</td><td>0.182.0</td></tr>
    <tr><td>ruby-offline-buildpack</td><td>1.7.27</td></tr>
    <tr><td>silk</td><td>2.17.0</td></tr>
    <tr><td>smb-volume</td><td>0.2.2</td></tr>
    <tr><td>staticfile-offline-buildpack</td><td>1.4.35</td></tr>
    <tr><td>statsd-injector</td><td>1.5.0</td></tr>
    <tr><td>syslog</td><td>11.4.0</td></tr>
    <tr><td>uaa</td><td>66.0</td></tr>
  </tbody>
</table>

### <a id='2.4.0-rc.2'></a> 2.4.0-rc.2

* **[Breaking change]** Increase default and minimum CPU core count from 1 to 2 for internal blobstore VMs to improve reliability
* **[Feature Improvement]** Add new endpoint in CredHub to find permissions given actor and path
* **[Feature Improvement]** `cf ssh` is now compatible with mutual-TLS-based verification of ingress traffic from gorouters to application instances
* **[Bug Fix]** Fix issue where some CAPI components would fail to start if bosh-dns was slow to start
* **[Bug Fix]** Continue emitting `mysql` as the mysql metrics `origin` to prevent breaking consumers like Healthwatch
* Bump capi to version `1.72.2`
* Bump cf-smoke-tests to version `40.0.25`
* Bump cflinuxfs2 to version `1.251.0`
* Bump cflinuxfs3 to version `0.42.0`
* Add new release consul-drain at version `0.0.1`
* Bump credhub to version `2.1.2`
* Bump dotnet-core-offline-buildpack to version `2.2.0`
* Bump go-offline-buildpack to version `1.8.29`
* Bump metric-registrar to version `1.0.4`
* Bump nodejs-offline-buildpack to version `1.6.34`
* Bump php-offline-buildpack to version `4.3.64`
* Bump python-offline-buildpack to version `1.6.23`
* Bump ruby-offline-buildpack to version `1.7.27`
* Bump staticfile-offline-buildpack to version `1.4.35`

### <a id='2.4.0-rc.1'></a> 2.4.0-rc.1

* **[Known Issue]** `deploy-notifications` errand fails when TLS is enabled to external database
* **[Known Issue]** `metrics-registrar` smoke test fails unless "Include OpsManager Root CA in Trusted Certs" is checked
* **[Breaking Change]** Improve GrootFS garbage collection
* **[Security Fix]** Update JDK to latest patch release for Autoscaler
* **[Security Fix]** Address leak of CF admin credentials into NFS broker bosh errand logs
* **[Security Fix]** Fix issue where policy server API responses did not contain X-Frame-Options and Content-Security-Policy
* **[Security Fix]** Rotate diego intermediate CA before current certificate expires
* **[Feature]** Add cloud controller deployment-updater job to enable zero-downtime pushes with `cf v3-zdt-push`
* **[Feature]** Enable fetching logs and metrics via gRPC
* **[Feature Improvement]** Operators can opt-in to enable TLS for clients of the internal PXC database
* **[Feature Improvement]** Allow TLS between usage-service and mysql to be turned off
* **[Feature Improvement]** Improve performance of the system_report/service_usages endpoint in the `usages-service` to prevent potential 502 or 504 responses on larger deployments
* **[Feature Improvement]** Update version number in link to docs page for Apps Manager
* **[Bug Fix]** Fix issue in Policy Server where a large number of spaces could cause policy cleaner to fail to clean stale policies
* **[Bug Fix]** Fix TLS hostname error when Metric Registrar is enabled
* **[Bug Fix]** Show more helpful error message in Apps Manager when toggling on Autoscaler fails
* **[Bug Fix]** Allow scaling of individual processes in multiprocess app when some processes are scaled to zero
* **[Bug Fix]** Fix issue in usage service where database passwords and usernames were not properly escaped causing push-usage-service errand to fail
* **[Bug Fix]** Fix issue with `cty` parameter in the JWT header not being propagated in the tokens issued by UAA which in particular could cause problems for Spring Boot app integrations.
* **[Bug Fix]** `push-usage-service` does not support databases that do not support TLS
* **[Bug Fix]** Fix issue where the CAPI sync job fails when TCP routes are being used
* **[Bug Fix]** Fix issue where configured database connection timeout for silk was not applied when using an external database
* Bump ubuntu-xenial stemcell to version `170.9`
* Bump cf-autoscaling to version `215`
* Bump cf-networking to version `2.18.2`
* Bump cflinuxfs2 to version `1.249.0`
* Bump cflinuxfs3 to version `0.40.0`
* Bump mapfs to version `1.1.2`
* Bump metric-registrar to version `1.0.2`
* Bump nfs-volume to version `1.7.4`
* Bump push-apps-manager-release to version `667.0.2`
* Bump push-usage-service-release to version `668.0.10`
* Bump uaa to version `66.0`

<table border="1" class="nice">
  <thead>
    <tr>
      <th>Component</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>ubuntu-xenial stemcell</td><td>170.9</td></tr>
    <tr><td>backup-and-restore-sdk</td><td>1.10.0</td></tr>
    <tr><td>binary-offline-buildpack</td><td>1.0.27</td></tr>
    <tr><td>bosh-dns-aliases</td><td>0.0.3</td></tr>
    <tr><td>bosh-system-metrics-forwarder</td><td>0.0.16</td></tr>
    <tr><td>bpm</td><td>0.13.0</td></tr>
    <tr><td>capi</td><td>1.71.2</td></tr>
    <tr><td>cf-autoscaling</td><td>215</td></tr>
    <tr><td>cf-backup-and-restore</td><td>0.0.11</td></tr>
    <tr><td>cf-cli</td><td>1.9.0</td></tr>
    <tr><td>cf-networking</td><td>2.18.2</td></tr>
    <tr><td>cf-smoke-tests</td><td>40.0.17</td></tr>
    <tr><td>cf-syslog-drain</td><td>8.0</td></tr>
    <tr><td>cflinuxfs2</td><td>1.249.0</td></tr>
    <tr><td>cflinuxfs3</td><td>0.40.0</td></tr>
    <tr><td>consul</td><td>198</td></tr>
    <tr><td>credhub</td><td>2.1.1</td></tr>
    <tr><td>diego</td><td>2.22.0</td></tr>
    <tr><td>dotnet-core-offline-buildpack</td><td>2.1.5</td></tr>
    <tr><td>garden-runc</td><td>1.16.7</td></tr>
    <tr><td>go-offline-buildpack</td><td>1.8.28</td></tr>
    <tr><td>haproxy</td><td>9.3.0</td></tr>
    <tr><td>java-offline-buildpack</td><td>4.16.1</td></tr>
    <tr><td>log-cache</td><td>2.0.1</td></tr>
    <tr><td>loggregator-agent</td><td>2.2</td></tr>
    <tr><td>loggregator</td><td>103.3</td></tr>
    <tr><td>mapfs</td><td>1.1.2</td></tr>
    <tr><td>metric-registrar</td><td>1.0.2</td></tr>
    <tr><td>mysql-monitoring</td><td>9.1.0</td></tr>
    <tr><td>nats</td><td>26</td></tr>
    <tr><td>nfs-volume</td><td>1.7.4</td></tr>
    <tr><td>nodejs-offline-buildpack</td><td>1.6.32</td></tr>
    <tr><td>notifications-ui</td><td>36</td></tr>
    <tr><td>notifications</td><td>54</td></tr>
    <tr><td>php-offline-buildpack</td><td>4.3.61</td></tr>
    <tr><td>push-apps-manager-release</td><td>667.0.2</td></tr>
    <tr><td>push-usage-service-release</td><td>668.0.10</td></tr>
    <tr><td>pxc</td><td>0.14.0</td></tr>
    <tr><td>python-offline-buildpack</td><td>1.6.21</td></tr>
    <tr><td>routing</td><td>0.182.0</td></tr>
    <tr><td>ruby-offline-buildpack</td><td>1.7.24</td></tr>
    <tr><td>silk</td><td>2.17.0</td></tr>
    <tr><td>smb-volume</td><td>0.2.2</td></tr>
    <tr><td>staticfile-offline-buildpack</td><td>1.4.32</td></tr>
    <tr><td>statsd-injector</td><td>1.5.0</td></tr>
    <tr><td>syslog</td><td>11.4.0</td></tr>
    <tr><td>uaa</td><td>66.0</td></tr>
  </tbody>
</table>

### <a id='2.4.0-beta.1'></a> 2.4.0-beta.1

* **[Feature Improvement]** NFS Broker connects to its database using TLS
* **[Feature Improvement]** Credhub can be configured to use the same external database as other components configured in PAS tile
* **[Feature Improvement]** UAA connects using TLS to internal database default & external databases when a CA cert is provided
* **[Feature Improvement]** UAA can be configured to use the same external database as other components configured in PAS tile
* **[Bug Fix]** Improve app/task placement reliability when apps are configured to receive TLS traffic from gorouters
* **[Bug Fix]** Fixes TLS hostname error when Metric Registrar is enabled
* Bump ubuntu-xenial stemcell to version `97.32`
* Bump capi to version `1.71.2`
* Bump cf-networking to version `2.18.0`
* Bump cf-smoke-tests to version `40.0.17`
* Bump cflinuxfs2 to version `1.247.0`
* Bump cflinuxfs3 to version `0.37.0`
* Bump diego to version `2.22.0`
* Bump push-usage-service-release to version `668.0.7`

<table border="1" class="nice">
  <thead>
    <tr>
      <th>Component</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>ubuntu-xenial stemcell</td><td>97.32</td></tr>
    <tr><td>backup-and-restore-sdk</td><td>1.10.0</td></tr>
    <tr><td>binary-offline-buildpack</td><td>1.0.27</td></tr>
    <tr><td>bosh-dns-aliases</td><td>0.0.3</td></tr>
    <tr><td>bosh-system-metrics-forwarder</td><td>0.0.16</td></tr>
    <tr><td>bpm</td><td>0.13.0</td></tr>
    <tr><td>capi</td><td>1.71.2</td></tr>
    <tr><td>cf-autoscaling</td><td>214</td></tr>
    <tr><td>cf-backup-and-restore</td><td>0.0.11</td></tr>
    <tr><td>cf-cli</td><td>1.9.0</td></tr>
    <tr><td>cf-networking</td><td>2.18.0</td></tr>
    <tr><td>cf-smoke-tests</td><td>40.0.17</td></tr>
    <tr><td>cf-syslog-drain</td><td>8.0</td></tr>
    <tr><td>cflinuxfs2</td><td>1.247.0</td></tr>
    <tr><td>cflinuxfs3</td><td>0.37.0</td></tr>
    <tr><td>consul</td><td>198</td></tr>
    <tr><td>credhub</td><td>2.1.1</td></tr>
    <tr><td>diego</td><td>2.22.0</td></tr>
    <tr><td>dotnet-core-offline-buildpack</td><td>2.1.5</td></tr>
    <tr><td>garden-runc</td><td>1.16.7</td></tr>
    <tr><td>go-offline-buildpack</td><td>1.8.28</td></tr>
    <tr><td>haproxy</td><td>9.3.0</td></tr>
    <tr><td>java-offline-buildpack</td><td>4.16.1</td></tr>
    <tr><td>log-cache</td><td>2.0.1</td></tr>
    <tr><td>loggregator-agent</td><td>2.2</td></tr>
    <tr><td>loggregator</td><td>103.3</td></tr>
    <tr><td>mapfs</td><td>1.1.1</td></tr>
    <tr><td>metric-registrar</td><td>1.0.1</td></tr>
    <tr><td>mysql-monitoring</td><td>9.1.0</td></tr>
    <tr><td>nats</td><td>26</td></tr>
    <tr><td>nfs-volume</td><td>1.7.1</td></tr>
    <tr><td>nodejs-offline-buildpack</td><td>1.6.32</td></tr>
    <tr><td>notifications-ui</td><td>36</td></tr>
    <tr><td>notifications</td><td>54</td></tr>
    <tr><td>php-offline-buildpack</td><td>4.3.61</td></tr>
    <tr><td>push-apps-manager-release</td><td>667.0.0</td></tr>
    <tr><td>push-usage-service-release</td><td>668.0.7</td></tr>
    <tr><td>pxc</td><td>0.14.0</td></tr>
    <tr><td>python-offline-buildpack</td><td>1.6.21</td></tr>
    <tr><td>routing</td><td>0.182.0</td></tr>
    <tr><td>ruby-offline-buildpack</td><td>1.7.24</td></tr>
    <tr><td>silk</td><td>2.17.0</td></tr>
    <tr><td>smb-volume</td><td>0.2.2</td></tr>
    <tr><td>staticfile-offline-buildpack</td><td>1.4.32</td></tr>
    <tr><td>statsd-injector</td><td>1.5.0</td></tr>
    <tr><td>syslog</td><td>11.4.0</td></tr>
    <tr><td>uaa</td><td>64.0</td></tr>
  </tbody>
</table>

### <a id='2.4.0-alpha.4'></a> 2.4.0-alpha.4

* **[Known Issue]** Usage service errand fails when using an external DB
    * Will be fixed in https://www.pivotaltracker.com/story/show/161629538
* **[Breaking Change]** Bump log-cache API to version 2.x which moves `/v1` endpoints to `/api/v1`
* **[Breaking Change]** Internal MySQL always uses Percona XtraDB Cluster
* **[Security Fix]** Rotate diego intermediate CA before current certificate expires
* **[Security Fix]** Bump UAA for CVEs
* **[Feature]** Add smb-volume-release to PAS
* **[Feature]** Users in `usage_service.audit` group can access the Usage Service API using their CF OAuth token
* **[Feature]** Apps manager includes new home page and allows users to search for apps, spaces, orgs and service instances
* **[Feature]** Add metric-registrar to enable App Developers to output custom application metrics that can be monitored by platform-provided tooling
* **[Beta Feature]** Users can now discover organization level usage durations across a foundation
* **[Beta Feature]** Networking administrators can configure egress networking policies dynamically to IP ranges instead of ASGs
* **[Feature Improvement]** Credhub connects to MySQL using TLS
* **[Feature Improvement]** The usage-service uses the shared CF CLI which can be updated independently
* **[Feature Improvement]** Operators can configure the default root filesystem for new applications created the platform
* **[Bug Fix]** Stop emitting product version in logging agent metrics to prevent rolling VMs unnecessarily on upgrades
* **[Bug Fix]** Fix manual configuration of load balancers for SSH to application containers on Small Footprint PAS (SF-PAS)
* **[Bug Fix]** Update log-cache client in Autoscaler for backward compatibility when upgrading PAS
* **[Bug Fix]** Fix monit scripting bug in nfsv3driver job that could cause the process to continue running after a monit stop
* **[Bug Fix]** UAA incorrectly require TLS when legacy Internal MySQL - MariaDB is selected
* Bump ubuntu-xenial stemcell to version `97.28`
* Bump capi to version `1.71.0`
* Bump cf-autoscaling to version `214`
* Bump cf-smoke-tests to version `40.0.13`
* Bump cf-syslog-drain to version `8.0`
* Bump cflinuxfs2 to version `1.245.0`
* Bump cflinuxfs3 to version `0.34.0`
* Bump garden-runc to version `1.16.7`
* Bump java-offline-buildpack to version `4.16.1`
* Bump log-cache to version `2.0.1`
* Add new release metric-registrar at version `1.0.1`
* Bump nfs-volume to version `1.7.1`
* Bump notifications-ui to version `36`
* Bump notifications to version `54`
* Bump push-apps-manager-release to version `667.0.0`
* Bump push-usage-service-release to version `668.0.6`
* Add new release smb-volume at version `0.2.2`
* Bump statsd-injector to version `1.5.0`
* Bump uaa to version `64.0`
* Removed cf-mysql release

<table border="1" class="nice">
  <thead>
    <tr>
      <th>Component</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>ubuntu-xenial stemcell</td><td>97.28</td></tr>
    <tr><td>backup-and-restore-sdk</td><td>1.10.0</td></tr>
    <tr><td>binary-offline-buildpack</td><td>1.0.27</td></tr>
    <tr><td>bosh-dns-aliases</td><td>0.0.3</td></tr>
    <tr><td>bosh-system-metrics-forwarder</td><td>0.0.16</td></tr>
    <tr><td>bpm</td><td>0.13.0</td></tr>
    <tr><td>capi</td><td>1.71.0</td></tr>
    <tr><td>cf-autoscaling</td><td>214</td></tr>
    <tr><td>cf-backup-and-restore</td><td>0.0.11</td></tr>
    <tr><td>cf-cli</td><td>1.9.0</td></tr>
    <tr><td>cf-networking</td><td>2.17.0</td></tr>
    <tr><td>cf-smoke-tests</td><td>40.0.13</td></tr>
    <tr><td>cf-syslog-drain</td><td>8.0</td></tr>
    <tr><td>cflinuxfs2</td><td>1.245.0</td></tr>
    <tr><td>cflinuxfs3</td><td>0.34.0</td></tr>
    <tr><td>consul</td><td>198</td></tr>
    <tr><td>credhub</td><td>2.1.1</td></tr>
    <tr><td>diego</td><td>2.19.0</td></tr>
    <tr><td>dotnet-core-offline-buildpack</td><td>2.1.5</td></tr>
    <tr><td>garden-runc</td><td>1.16.7</td></tr>
    <tr><td>go-offline-buildpack</td><td>1.8.28</td></tr>
    <tr><td>haproxy</td><td>9.3.0</td></tr>
    <tr><td>java-offline-buildpack</td><td>4.16.1</td></tr>
    <tr><td>log-cache</td><td>2.0.1</td></tr>
    <tr><td>loggregator-agent</td><td>2.2</td></tr>
    <tr><td>loggregator</td><td>103.3</td></tr>
    <tr><td>mapfs</td><td>1.1.1</td></tr>
    <tr><td>metric-registrar</td><td>1.0.1</td></tr>
    <tr><td>mysql-monitoring</td><td>9.1.0</td></tr>
    <tr><td>nats</td><td>26</td></tr>
    <tr><td>nfs-volume</td><td>1.7.1</td></tr>
    <tr><td>nodejs-offline-buildpack</td><td>1.6.32</td></tr>
    <tr><td>notifications-ui</td><td>36</td></tr>
    <tr><td>notifications</td><td>54</td></tr>
    <tr><td>php-offline-buildpack</td><td>4.3.61</td></tr>
    <tr><td>push-apps-manager-release</td><td>667.0.0</td></tr>
    <tr><td>push-usage-service-release</td><td>668.0.6</td></tr>
    <tr><td>pxc</td><td>0.14.0</td></tr>
    <tr><td>python-offline-buildpack</td><td>1.6.21</td></tr>
    <tr><td>routing</td><td>0.182.0</td></tr>
    <tr><td>ruby-offline-buildpack</td><td>1.7.24</td></tr>
    <tr><td>silk</td><td>2.17.0</td></tr>
    <tr><td>smb-volume</td><td>0.2.2</td></tr>
    <tr><td>staticfile-offline-buildpack</td><td>1.4.32</td></tr>
    <tr><td>statsd-injector</td><td>1.5.0</td></tr>
    <tr><td>syslog</td><td>11.4.0</td></tr>
    <tr><td>uaa</td><td>64.0</td></tr>
  </tbody>
</table>

### <a id='2.4.0-alpha.3'></a> 2.4.0-alpha.3

* **[Feature]** Remove configuration for internal MySQL Load Balancer
* **[Feature]** Co-locate BPM on all VMs in PAS and IST
* **[Feature]** Add `tile_installer` UAA client intended for use by service tiles during installation to create their own long-term operational client credentials
* **[Feature Improvement]** The notification release uses the shared CF CLI which can be updated independently
* **[Feature Improvement]** The notification ui release uses the shared CF CLI which can be updated independently
* **[Feature Improvement]** Loggregator can be updated without rolling every VM
* **[Feature Improvement]** Change default HAProxy instance count to 0
* **[Feature Improvement]** Routing-API job connects to MySQL using TLS
* **[Feature Improvement]** All errands use the CF CLI that is distributed as a BOSH release
* **[Feature Improvement]** Update name of the Small Footprint PAS tile shown on the tile in Ops Manager UI
* **[Feature Improvement]** clock_global now defaults to 2 instances to be highly available
* **[Feature Improvement]** Allow disabling connection pooling for autoscaler API & escape special characters in external database passwords
* **[Bug Fix]** Fix issue where the PAS tile could be incorrectly downloaded when upgrading SF-PAS via PivNet
* **[Bug Fix]** Fix parse error for syslog rules when iptables logging is enabled
* **[Bug Fix]** Remove two empty Credhub VMs from SF-PAS deployment

* Bump ubuntu-xenial stemcell to version `97.19`
* Bump binary-offline-buildpack to version `1.0.27`
* Bump bpm to version `0.13.0`
* Bump capi to version `1.70.0`
* Bump cf-autoscaling to version `212`
* Bump cf-cli to version `1.9.0`
* Bump cf-networking to version `2.17.0`
* Bump cf-smoke-tests to version `40.0.10`
* Bump cflinuxfs2 to version `1.242.0`
* Bump cflinuxfs3 to version `0.29.0`
* Bump consul to version `198`
* Bump credhub to version `2.1.1`
* Bump diego to version `2.19.0`
* Bump dotnet-core-offline-buildpack to version `2.1.5`
* Bump garden-runc to version `1.16.6`
* Bump go-offline-buildpack to version `1.8.28`
* Bump java-offline-buildpack to version `4.16`
* Bump log-cache to version `1.4.7`
* Add new release loggregator-agent at version `2.2`
* Bump loggregator to version `103.3`
* Bump mapfs to version `1.1.1`
* Bump mysql-monitoring to version `9.1.0`
* Bump nfs-volume to version `1.6.0`
* Bump nodejs-offline-buildpack to version `1.6.32`
* Bump notifications-ui to version `35`
* Bump notifications to version `53`
* Bump php-offline-buildpack to version `4.3.61`
* Bump push-apps-manager-release to version `666.0.12`
* Bump push-usage-service-release to version `667.0.10`
* Bump python-offline-buildpack to version `1.6.21`
* Bump ruby-offline-buildpack to version `1.7.24`
* Bump silk to version `2.17.0`
* Bump staticfile-offline-buildpack to version `1.4.32`
* Bump statsd-injector to version `1.4.0`
* Bump syslog to version `11.4.0`

<table border="1" class="nice">
  <thead>
    <tr>
      <th>Component</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>ubuntu-xenial stemcell</td><td>97.19</td></tr>
    <tr><td>backup-and-restore-sdk</td><td>1.10.0</td></tr>
    <tr><td>binary-offline-buildpack</td><td>1.0.27</td></tr>
    <tr><td>bosh-dns-aliases</td><td>0.0.3</td></tr>
    <tr><td>bosh-system-metrics-forwarder</td><td>0.0.16</td></tr>
    <tr><td>bpm</td><td>0.13.0</td></tr>
    <tr><td>capi</td><td>1.70.0</td></tr>
    <tr><td>cf-autoscaling</td><td>212</td></tr>
    <tr><td>cf-backup-and-restore</td><td>0.0.11</td></tr>
    <tr><td>cf-cli</td><td>1.9.0</td></tr>
    <tr><td>cf-mysql</td><td>36.15.0</td></tr>
    <tr><td>cf-networking</td><td>2.17.0</td></tr>
    <tr><td>cf-smoke-tests</td><td>40.0.10</td></tr>
    <tr><td>cf-syslog-drain</td><td>7.1</td></tr>
    <tr><td>cflinuxfs2</td><td>1.242.0</td></tr>
    <tr><td>cflinuxfs3</td><td>0.29.0</td></tr>
    <tr><td>consul</td><td>198</td></tr>
    <tr><td>credhub</td><td>2.1.1</td></tr>
    <tr><td>diego</td><td>2.19.0</td></tr>
    <tr><td>dotnet-core-offline-buildpack</td><td>2.1.5</td></tr>
    <tr><td>garden-runc</td><td>1.16.6</td></tr>
    <tr><td>go-offline-buildpack</td><td>1.8.28</td></tr>
    <tr><td>haproxy</td><td>9.3.0</td></tr>
    <tr><td>java-offline-buildpack</td><td>4.16</td></tr>
    <tr><td>log-cache</td><td>1.4.7</td></tr>
    <tr><td>loggregator-agent</td><td>2.2</td></tr>
    <tr><td>loggregator</td><td>103.3</td></tr>
    <tr><td>mapfs</td><td>1.1.1</td></tr>
    <tr><td>mysql-monitoring</td><td>9.1.0</td></tr>
    <tr><td>nats</td><td>26</td></tr>
    <tr><td>nfs-volume</td><td>1.6.0</td></tr>
    <tr><td>nodejs-offline-buildpack</td><td>1.6.32</td></tr>
    <tr><td>notifications-ui</td><td>35</td></tr>
    <tr><td>notifications</td><td>53</td></tr>
    <tr><td>php-offline-buildpack</td><td>4.3.61</td></tr>
    <tr><td>push-apps-manager-release</td><td>666.0.12</td></tr>
    <tr><td>push-usage-service-release</td><td>667.0.10</td></tr>
    <tr><td>pxc</td><td>0.14.0</td></tr>
    <tr><td>python-offline-buildpack</td><td>1.6.21</td></tr>
    <tr><td>routing</td><td>0.182.0</td></tr>
    <tr><td>ruby-offline-buildpack</td><td>1.7.24</td></tr>
    <tr><td>silk</td><td>2.17.0</td></tr>
    <tr><td>staticfile-offline-buildpack</td><td>1.4.32</td></tr>
    <tr><td>statsd-injector</td><td>1.4.0</td></tr>
    <tr><td>syslog</td><td>11.4.0</td></tr>
    <tr><td>uaa</td><td>60.2</td></tr>
  </tbody>
</table>

### <a id='2.4.0-alpha.2'></a> 2.4.0-alpha.2

* **[Feature]** Support restore from different Azure storage account
* **[Feature Improvement]** Improve UI for route integrity options
* **[Feature Improvement]** Credhub is GA and on by default
* **[Feature Improvement]** Scale Consul Server down to 0
* **[Feature Improvement]** Remove option to disable route integrity
* **[Feature Improvement]** network policy server connects to MySQL using TLS
* **[Feature Improvement]** Operators can distinguish among metrics being emitted from different PAS tile deployments
* **[Feature Improvement]** credhub connects to MySQL using TLS
* **[Feature Improvement]** Diego connects to MySQL using TLS
* **[Feature Improvement]** CAPI connects to MySQL using TLS
* **[Feature Improvement]** PAS can be configured with a CA certificate for TLS connections to an external MySQL database
* **[Feature Improvement]** Metrics emitted from each deployment are tagged with additional metadata

* Bump stemcell to Xenial version `97.17`
* Bump backup-and-restore-sdk to version `1.10.0`
* Bump binary-offline-buildpack to version 1.0.26
* Bump bosh-system-metrics-forwarder to version 0.0.16
* Bump bpm to version 0.12.3
* Bump capi to version 1.69.0
* Bump cf-autoscaling to version 210
* Bump cf-cli to version 1.8.0
* Bump cf-networking to version 2.16.0
* Bump cf-smoke-tests to version 40.0.9
* Bump cf-syslog-drain to version 7.1
* Bump cflinuxfs2 to version 1.238.0
* Bump cflinuxfs3 to version 0.25.0
* Bump consul to version 196
* Bump diego to version 2.18.0
* Bump garden-runc to version 1.16.4
* Bump haproxy to version 9.3.0
* Bump log-cache to version 1.4.6
* Bump loggregator to version 103.2
* Bump nats to version 26
* Bump notifications to version 52
* Bump notifications-ui to version 34
* Bump pxc to version 0.14.0
* Bump routing to version 0.182.0
* Bump silk to version 2.16.0

  <table border="1" class="nice">
  <thead> <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>stemcell</td><td>97.17</td>
  </tr><tr>
    <td>backup-and-restore-sdk</td><td>1.10.0</td>
  </tr><tr>
    <td>binary-offline-buildpack</td><td>1.0.26</td>
  </tr><tr>
    <td>bosh-dns-aliases</td><td>0.0.3</td>
  </tr><tr>
    <td>bosh-system-metrics-forwarder</td><td>0.0.16</td>
  </tr><tr>
    <td>bpm</td><td>0.12.3</td>
  </tr><tr>
    <td>capi</td><td>1.69.0</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>210</td>
  </tr><tr>
    <td>cf-backup-and-restore</td><td>0.0.11</td>
  </tr><tr>
    <td>cf-cli</td><td>1.8.0</td>
  </tr><tr>
    <td>cf-mysql</td><td>36.15.0</td>
  </tr><tr>
    <td>cf-networking</td><td>2.16.0</td>
  </tr><tr>
    <td>cf-smoke-tests</td><td>40.0.9</td>
  </tr><tr>
    <td>cf-syslog-drain</td><td>7.1</td>
  </tr><tr>
    <td>cflinuxfs2</td><td>1.238.0</td>
  </tr><tr>
    <td>cflinuxfs3</td><td>0.25.0</td>
  </tr><tr>
    <td>consul</td><td>196</td>
  </tr><tr>
    <td>credhub</td><td>2.0.2</td>
  </tr><tr>
    <td>diego</td><td>2.18.0</td>
  </tr><tr>
    <td>dotnet-core-offline-buildpack</td><td>2.1.4</td>
  </tr><tr>
    <td>garden-runc</td><td>1.16.4</td>
  </tr><tr>
    <td>go-offline-buildpack</td><td>1.8.26</td>
  </tr><tr>
    <td>haproxy</td><td>9.3.0</td>
  </tr><tr>
    <td>java-offline-buildpack</td><td>4.15</td>
  </tr><tr>
    <td>log-cache</td><td>1.4.6</td>
  </tr><tr>
    <td>loggregator</td><td>103.2</td>
  </tr><tr>
    <td>mapfs</td><td>1.1.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>8.20.0</td>
  </tr><tr>
    <td>nats</td><td>26</td>
  </tr><tr>
    <td>nfs-volume</td><td>1.5.3</td>
  </tr><tr>
    <td>nodejs-offline-buildpack</td><td>1.6.30</td>
  </tr><tr>
    <td>notifications</td><td>52</td>
  </tr><tr>
    <td>notifications-ui</td><td>34</td>
  </tr><tr>
    <td>php-offline-buildpack</td><td>4.3.59</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>666.0.0</td>
  </tr><tr>
    <td>push-usage-service-release</td><td>667.0.1</td>
  </tr><tr>
    <td>python-offline-buildpack</td><td>1.6.20</td>
  </tr><tr>
    <td>pxc</td><td>0.14.0</td>
  </tr><tr>
    <td>routing</td><td>0.182.0</td>
  </tr><tr>
    <td>ruby-offline-buildpack</td><td>1.7.22</td>
  </tr><tr>
    <td>silk</td><td>2.16.0</td>
  </tr><tr>
    <td>staticfile-offline-buildpack</td><td>1.4.31</td>
  </tr><tr>
    <td>statsd-injector</td><td>1.3.0</td>
  </tr><tr>
    <td>syslog</td><td>11.3.2</td>
  </tr><tr>
    <td>uaa</td><td>60.2</td>
  </tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="2"><em>\* Components marked with an asterisk have been patched to resolve security vulnerabilities or fix component behavior.</em></td>
  </tr>
  </tfoot>
  </table>

### <a id='2.4.0-alpha.1'></a> 2.4.0-alpha.1

* Bump bosh-dns-aliases to version `0.0.3`
* Bump bpm to version `0.12.2`
* Bump capi to version `1.67.0`
* Bump cf-cli to version `1.6.0`
* Bump cf-networking to version `2.14.0`
* Bump credhub to version `2.0.2`
* Bump diego to version `2.16.0`
* Bump garden-runc to version `1.16.3`
* Bump haproxy to version `9.1.0`
* Bump log-cache to version `1.4.1`
* Bump loggregator to version `103.1`
* Bump mapfs to version `1.1.0`
* Bump push-apps-manager-release to version `666.0.0`
* Bump push-usage-service-release to version `667.0.1`
* Bump routing to version `0.180.0`
* Bump silk to version `2.14.0`

  <table border="1" class="nice">
  <thead> <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>stemcell</td><td>97.15</td>
  </tr><tr>
    <td>backup-and-restore-sdk</td><td>1.9.0</td>
  </tr><tr>
    <td>binary-offline-buildpack</td><td>1.0.25</td>
  </tr><tr>
    <td>bosh-dns-aliases</td><td>0.0.3</td>
  </tr><tr>
    <td>bosh-system-metrics-forwarder</td><td>0.0.15</td>
  </tr><tr>
    <td>bpm</td><td>0.12.2</td>
  </tr><tr>
    <td>capi</td><td>1.67.0</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>208</td>
  </tr><tr>
    <td>cf-backup-and-restore</td><td>0.0.11</td>
  </tr><tr>
    <td>cf-cli</td><td>1.6.0</td>
  </tr><tr>
    <td>cf-mysql</td><td>36.15.0</td>
  </tr><tr>
    <td>cf-networking</td><td>2.14.0</td>
  </tr><tr>
    <td>cf-smoke-tests</td><td>40.0.6</td>
  </tr><tr>
    <td>cf-syslog-drain</td><td>7.0</td>
  </tr><tr>
    <td>cflinuxfs2</td><td>1.234.0</td>
  </tr><tr>
    <td>cflinuxfs3</td><td>0.17.0</td>
  </tr><tr>
    <td>consul</td><td>195</td>
  </tr><tr>
    <td>credhub</td><td>2.0.2</td>
  </tr><tr>
    <td>diego</td><td>2.16.0</td>
  </tr><tr>
    <td>dotnet-core-offline-buildpack</td><td>2.1.4</td>
  </tr><tr>
    <td>garden-runc</td><td>1.16.3</td>
  </tr><tr>
    <td>go-offline-buildpack</td><td>1.8.26</td>
  </tr><tr>
    <td>haproxy</td><td>9.1.0</td>
  </tr><tr>
    <td>java-offline-buildpack</td><td>4.15</td>
  </tr><tr>
    <td>log-cache</td><td>1.4.1</td>
  </tr><tr>
    <td>loggregator</td><td>103.1</td>
  </tr><tr>
    <td>mapfs</td><td>1.1.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>8.20.0</td>
  </tr><tr>
    <td>nats</td><td>25</td>
  </tr><tr>
    <td>nfs-volume</td><td>1.5.3</td>
  </tr><tr>
    <td>nodejs-offline-buildpack</td><td>1.6.30</td>
  </tr><tr>
    <td>notifications</td><td>51</td>
  </tr><tr>
    <td>notifications-ui</td><td>33</td>
  </tr><tr>
    <td>php-offline-buildpack</td><td>4.3.59</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>666.0.0</td>
  </tr><tr>
    <td>push-usage-service-release</td><td>667.0.1</td>
  </tr><tr>
    <td>python-offline-buildpack</td><td>1.6.20</td>
  </tr><tr>
    <td>pxc</td><td>0.13.0</td>
  </tr><tr>
    <td>routing</td><td>0.180.0</td>
  </tr><tr>
    <td>ruby-offline-buildpack</td><td>1.7.22</td>
  </tr><tr>
    <td>silk</td><td>2.14.0</td>
  </tr><tr>
    <td>staticfile-offline-buildpack</td><td>1.4.31</td>
  </tr><tr>
    <td>statsd-injector</td><td>1.3.0</td>
  </tr><tr>
    <td>syslog</td><td>11.3.2</td>
  </tr><tr>
    <td>uaa</td><td>60.2</td>
  </tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="2"><em>\* Components marked with an asterisk have been patched to resolve security vulnerabilities or fix component behavior.</em></td>
  </tr>
  </tfoot>
  </table>

## <a id='upgrade'></a> How to Upgrade

The procedure for upgrading to Pivotal Application Service (PAS) v2.4 is documented in the [Upgrading Pivotal Cloud Foundry](http://docs.pivotal.io/pivotalcf/2-4/customizing/upgrading-pcf.html) topic.

When upgrading to PAS v2.4, be aware of the following upgrade considerations:

* If you previously used an earlier version of PAS, you must first upgrade to PAS v2.3 to successfully upgrade to PAS v2.4.

* You must enable route integity before upgrading to PAS v2.4. To enable route integrity, go to **Application Containers** in PAS and select **Router uses TLS to verify application identity**. This option does use approximately 32MB more memory per app.

* If you are running internal MySQL databases on MariaDB, you must migrate them to Percona server before upgrading to PAS v2.4. For more information, see [Migrating to Internal Percona MySQL](https://docs.pivotal.io/pivotalcf/2-4/opsguide/migrate-percona-mysql.html).

* Some partner service tiles may be incompatible with PCF v2.4. Pivotal is working with partners to ensure their tiles are updated to work with the latest versions of PCF.<br/><br/> For information about which partner service releases are currently compatible with PCF v2.4, review the appropriate partners services release documentation at [https://docs.pivotal.io](https://docs.pivotal.io), or contact the partner organization that produces the tile.


## <a id='new-features'></a> New Features in PAS v2.4

### <a id="credhub-ga"></a> Runtime CredHub is GA and Enabled by Default

Runtime CredHub is enabled by default in the PAS tile. For more information about where your credentials are stored, see [Runtime CredHub](http://docs.pivotal.io/pivotalcf/credhub/index.html#runtime).

CredHub is generally available and includes bug fixes, security updates, and improvements to the `find` command in the CredHub CLI.

You can scale the number of CredHub instances in the **Resource Config** pane. In PAS v2.4, the number of CredHub instances defaults to `2`.

For upgrades to v2.4, PAS populates the CredHub row in the **Resource Config** pane with the value set in your previous version of the tile.

### <a id="credhub-db"></a>CredHub Can Use the Same External Database as Other PAS Components

In the PAS v2.4 tile, you can configure CredHub to use the same external database
as other PAS components. If you select **External Databases - (e.g. AWS RDS)** on
the **Databases** pane of the PAS tile, select **PAS database** on the **CredHub**
pane for CredHub to use the same external database.

To use a separate external database for CredHub, select **Other external database**
on the **CredHub** pane of the PAS tile. If you use GCP, you cannot use an external
database for CredHub. For more information, see [CredHub Database Cannot Be External
on GCP](#external-credhub) below.

For more information, see the PAS topic that corresponds to your IaaS:

* [Deploying PAS on AWS](http://docs.pivotal.io/pivotalcf/customizing/pcf-aws-manual-er-config.html#credhub)
* [Deploying PAS on AWS Using Terraform](http://docs.pivotal.io/pivotalcf/customizing/aws-er-config-terraform.html#credhub)
* [Deploying PAS on Azure](http://docs.pivotal.io/pivotalcf/customizing/azure-er-config.html#credhub)
* [Deploying PAS on Azure Using Terraform](http://docs.pivotal.io/pivotalcf/customizing/azure-er-config-terraform.html#credhub)
* [Deploying PAS on GCP](http://docs.pivotal.io/pivotalcf/customizing/gcp-er-config.html#credhub)
* [Deploying PAS on GCP Using Terraform](http://docs.pivotal.io/pivotalcf/customizing/gcp-er-config-terraform.html#credhub)
* [Deploying PAS on OpenStack](http://docs.pivotal.io/pivotalcf/customizing/openstack-er-config.html#credhub)
* [Deploying PAS on vSphere](http://docs.pivotal.io/pivotalcf/customizing/config-er-vmware.html#credhub)

### <a id="cflinuxfs3"></a> PAS Uses cflinuxfs3 by Default

PAS v2.4 uses the `cflinuxfs3` stack and related buildpacks by default on new installs. Buildpacks have the same name but use a different stack.

You can switch between `cflinuxfs2` and `cflinuxfs3` using the cf CLI (Cloud Foundry Command Line Interface). For more information, see [Changing Stacks](https://docs.pivotal.io/pivotalcf/2-4/devguide/deploy-apps/stacks.html).

You can also set your default stack in the **Cloud Controller** pane of the PAS tile. For more information, see [Cloud Controller](https://docs.pivotal.io/pivotalcf/2-4/customizing/pas-config.html#config-cc).

The `cflinuxfs3` stack was introduced in PAS v2.3. For more information, see [cflinuxfs3 Stack and Compatible Buildpacks](https://docs.pivotal.io/pivotalcf/2-3/pcf-release-notes/runtime-rn.html#cflinuxfs3) in the PAS v2.3 release notes.

### <a id="consul-server-removed"></a> Consul Server VMs Are Removed from PAS

Consul Server VMs are now removed from PAS, saving VM resources and reducing maintenance around managing a clustered component.

### <a id="tls-to-db"></a> Components Communicate to Database Using TLS

Platform components like CAPI, Diego, and CredHub use TLS to communicate with the database. This happens automatically when using the internal database. For external databases like RDS, you can provide the CA certificate in the **Databases** pane of the PAS tile.

### <a id='percona'></a> Internal MySQL Databases Run Only on Percona

In PAS v2.2 and v2.3, internal MySQL databases could run on either MariaDB or Percona servers. PAS v2.4 no longer uses MariaDB, so you must migrate internal MariaDB databases to Percona and redeploy PAS v2.3 before upgrading to PAS v2.4.

To migrate your databases to Percona, see [Migrating to Internal Percona MySQL](https://docs.pivotal.io/pivotalcf/2-4/opsguide/migrate-percona-mysql.html).

### <a id="nfs-experimental-graduation"></a> NFS-Experimental Service Graduation

The existing `nfs-experimental` service is promoted from "experimental" to "production". The original fuse-based `nfs` service and existing `nfs` service bindings are now called `nfs-legacy`.

To switch over to the new `nfs` service, you must re-create and re-bind your existing service bindings to the `nfs` service.

### <a id="app-identity"></a> Gorouter Always Verifies App Identity

For all PAS v2.4 foundations, the Gorouter always uses TLS to verify app identity. Verifying app identity improves resiliency and consistency for app routes, as well as increases security by encrypting data in flight from the Gorouter.

In PAS v2.3 and earlier, you can have insecure routing without TLS. Before you upgrade to v2.4, you must have secure routing with TLS enabled. For more information, see [Upgrade Preparation Checklist for PCF v2.4](https://docs.pivotal.io/pivotalcf/2-4/upgrading/checklist.html).

For more information about the verifying app identity feature, see [Increased Resiliency, Consistency, and Security for HTTP Routing](https://docs.pivotal.io/pivotalcf/2-1/pcf-release-notes/runtime-rn.html#route-consistency) in the PAS v2.1 release notes.

### <a id="metrics-prefix"></a> Uniquely Identify Metrics by Tile

As the value for `deployment`, metrics use `cf-GUID`, which corresponds to the BOSH deployment name of your PAS tile. With a GUID, you can uniquely identify your metrics by tile. In PAS v2.3 and earlier, metrics have a `deployment` value of `cf`.

This feature is enabled by default in new deployments of PAS v2.4, but disabled by default for PAS deployments upgrading to PAS v2.4.

<p class="breaking note"><strong>Breaking Change:</strong> If you have scripts that rely on <code>cf</code> as the value for <code>deployment</code>, your scripts may break. For more information, see <a href="./breaking-changes.html#metrics-prefix">Changed Deployment Value for PAS Metrics</a>.</p>

### <a id="human-friendly-metric-tags"></a> See Human-Friendly Metadata for Metrics

PAS now tags metrics with additional metadata to help operators better parse the metrics coming from their different deployments. These metadata tags also enable downstream monitoring products, such as PCF Healthwatch, to easily display human-readable names.

The tags are as follows:

* `product`: The value of this tag is always `Pivotal Application Service` for the PAS tile. The tags for other products are `PCF Isolation Segment`, `PCF Small Footprint`, `Pivotal Application Service for Windows 2012R2`, and `Pivotal Application Service for Windows`.

* `system_domain`: The value of this tag corresponds to what you set in the **System Domain** field in the **Domains** tab of the PAS tile.

* `placement_tag`: The value of this tag is always `null` for PAS. However, for PAS for Windows and PCF Isolation Segment tiles, you can configure this value using the **Segment Name** field in the **Application Containers** pane.

Previously, you could not easily know the deployment that a metric from an Isolation Segment was emitted from. Now, an operator can display capacity and other relevant metrics using the `placement_tag` name. This makes it easier to reason the importance of a given segment when issues arise.

These tags are properties of the [metron](https://docs.pivotal.io/pivotalcf/2-4/loggregator/architecture.html#metron) agent running on each VM in a deployment.

### <a id="global-search"></a> Global Search in Apps Manager

Apps Manager has a global searchbar on every Apps Manager page. With the global searchbar, you can search for an org name, space name, service instance name, and app name without leaving the page.

Search results populate with each keypress and display below the searchbar. When the global searchbar is selected but empty, recently-accessed apps, services, spaces, and orgs display below the searchbar.

This feature does not have an equivalent in the cf CLI.

### <a id="apps-man-ui"></a> Navigation Updates in Apps Manager

To improve navigation, Apps Manager v2.4 includes the following UI changes:

- New home page that shows the following:
   - Up to ten of the most-recently accessed apps with status, name, org and space, instances, and time since last push
   - All orgs in your PCF deployment
- Simplified sidebar navigation with **Home** and **Marketplace** only
- Breadcrumbs to help you navigate to previous screens

### <a id="restage-apps"></a> Restage Apps in Apps Manager

Apps Manager includes a restage button. The button is in addition to the stop and start buttons on the app management page. Restaging your app stops your app and restages it by compiling a new droplet and starting it.

Restage your app if you changed the environment in a way that affects your staging process. For example, you might set an environment variable that the buildpack consumes.

For more information about the restage button in the Apps Manager UI, see [Start, Stop, or Restage an App](https://docs.pivotal.io/pivotalcf/2-4/console/manage-apps.html#start-stop).

### <a id="share-service-instance"></a> Share Service Instances in Apps Manager

From the **Overview** tab of a service instance, you can share the service instance to make it available in multiple spaces you specify. With Space Developer permissions, you can view, add, and remove service instance sharing.

For more information, see [Service Instance Sharing](http://docs.pivotal.io/pivotalcf/2-4/console/manage-apps.html#shared-instances).

### <a id=‘app-automator’></a> App Automator for PCF (Beta)

App Automator for PCF combines the functionality of App Scheduler and App Autoscaler by enabling flexible workload scheduling with an easy-to-use manifest, so you can run workloads based on demand or a schedule. Developers can express when and what workloads should run with triggers and actions. These parameters are in an App Automator manifest that is kept within the app code.

PAS v2.4 will include predefined triggers and actions based on common scenarios:
    - **Triggers:** `schedule/cron`, `event`, and `metric`
    - **Actions:** `scale`, `curl`, `task`

App Autoscaler does not need a database or service broker to operate. Just install App Autoscaler via the cf CLI, and it is is available in the app space.

### <a id="log-api"></a> Loggregator v2 API is Readable Through RLP Gateway

As a nozzle developer, you can access the Loggregator v2 API through a Reverse Log Proxy (RLP) gateway. The RLP gateway provides an HTTP API to access the RLP. With the RLP gateway, you do not need to manage mutual TLS to access the Loggregator v2 API.

By default, the  RLP communicates with clients using gRPC over mutual TLS. To enable HTTP access instead, use the RLP Gateway. For more information about the RLP Gateway, see [Reverse Log Proxy (RLP) Gateway](https://github.com/cloudfoundry/loggregator/blob/master/docs/rlp_gateway.md) in the Loggregator GitHub repository.

For more information about the Loggregator API, see [loggregator-api](https://github.com/cloudfoundry/loggregator-api) in GitHub.

### <a id="metric-registrar"></a> Emit Custom App Metrics to the Metric Registrar

PAS v2.4 includes a new component: the Metric Registrar. The Metric Registrar allows app developers to export custom app metrics and events in a format that Loggregator can consume. App developers can then use the custom metrics to monitor apps with PCF Metrics and configure autoscaling rules with PCF Autoscaler.

For more information, see the following topics:

* [Configuring the Metric Registrar](http://docs.pivotal.io/pivotalcf/2-4/metric-registrar/index.html)
* [Registering Custom App Metrics](http://docs.pivotal.io/pivotalcf/2-4/metric-registrar/using.html)

### <a id="dynamic-egress"></a> Create Dynamic Egress Policies (Beta)

PAS v2.4 includes a beta feature that allows you to create dynamic egress policies so your apps can communicate with external services. These policies are similar to Application Security Groups (ASGs) but include the following advantages:

* You do not have to restart your apps when applying these policies, so there is no downtime.
* The policies include an additional level of granularity: you can apply them to specific apps.

For more information, see [Administering Dynamic Egress Policies (Beta)](https://docs.pivotal.io/pivotalcf/2-4/devguide/egress-policies.html).

### <a id="smb"></a> SMB Volume Services

PAS v2.4 adds support for SMB volume services, allowing developers to bind existing SMB shares to their apps. The SMB protocol has native password authentication, which means you can control access to file shares without the overhead of configuring an LDAP server.

This feature is disabled by default. To enable this feature, see [Enable SMB Volume Services](https://docs.pivotal.io/pivotalcf/2-4/opsguide/enable-vol-services.html#smb-enable).

For information about how to bind a volume service to an app, see [Using an External File System (Volume Services)](https://docs.pivotal.io/pivotalcf/2-4/devguide/services/using-vol-services.html).

### <a id='enable-int-tls'></a> TLS for Internal System Database (Beta)

PAS v2.4 supports enabling TLS for clients of the internal system database. This feature is in beta and disabled by default. To enable this feature, see the _Advanced Features_ section of the [PAS deployment topic for your IaaS](https://docs.pivotal.io/pivotalcf/2-4/customizing/pas.html).

### <a id='enable-ext-tls'></a> TLS for External Databases

You can configure PAS v2.4 to use TLS for all components' connections to an external MySQL database by providing a Certificate Authority (CA) certificate. For more information, see the _External Database Configuration_ section of the [PAS configuration topic for your IaaS](https://docs.pivotal.io/pivotalcf/2-4/customizing/pas.html).

### <a id="zdt-deploy"></a> Zero Downtime App Deployments (Beta)

PAS v2.4 includes support for native zero downtime app deployments using experimental cf CLI commands. For more information about using this feature, see the [Deploying Apps with Zero Downtime (Beta)](https://docs.pivotal.io/pivotalcf/2-4/devguide/deploy-apps/zero-downtime.html) topic.

This feature is enabled by default. You can optionally disable it in the **Advanced Features** pane.

### <a id="cf-ssh-mtls"></a> Support for cf ssh with Mutual TLS App Identity Verification

Developers can `cf ssh` into apps when mutual TLS (mTLS) is enabled for app identity verification.

Operators enable mTLS by selecting the **Router and applications use mutual TLS to verify each other’s identity** option in the Application Containers pane of PAS.

This removes the `cf ssh` known issue described in the [Limitations with Mutual TLS App Identity Verification](https://docs.pivotal.io/pivotalcf/2-3/pcf-release-notes/runtime-rn.html#mutual-tls-id-limitations) section of the _PAS v2.3 Release Notes_.

### <a id="haproxy-zero"></a> HAProxy Defaults to Zero Instances

PAS v2.4 does not deploy the optional HAProxy component by default. Previous versions of PAS deployed three instances of HAProxy by default.

<p class="breaking note"><strong>Breaking Change:</strong> This is a breaking change if you are using HAProxy with the <strong>Automatic</strong> setting for your instance count. On upgrading to PAS v2.4, you will have zero HAProxy instances unless you specify an instance count other than the <strong>Automatic</strong> setting. For example, if you have the instance count set to <strong>Automatic: 3</strong>, modify the instance count to <strong>3</strong> in the <strong>Resource Config</strong> pane before you upgrade.</p>

<p class="note"><strong>Note</strong>: PAS still deploys one HAProxy instance for vSphere environments by default.</p>

### <a id="improved-garbage-collection"></a> Improved Garbage Collection

Operators can configure container filesystem garbage collection based on the disk usage of other jobs in their deployment rather than a garbage collection threshold.

PAS v2.4 replaces the **Clean up disk-space once threshold is reached** option with **Clean up disk-space once usage fills disk** in the **Application Containers** pane.

For information about configuring garbage collection values, see [Configuring Cell Disk Cleanup Scheduling](http://docs.pivotal.io/pivotalcf/2-4/opsguide/config-cell-cleanup.html).

### <a id="bpm"></a> All Components Use BOSH Process Manager

Starting in v2.3, some PAS components used BOSH Process Manager (BPM). In v2.4, all components use BPM. For more information, see [BOSH Process Manager](https://docs.pivotal.io/pivotalcf/2-3/pcf-release-notes/runtime-rn.html#bpm) in the _Pivotal Application Service v2.3 Release Notes_.

## <a id='bug-fixes'></a> Bug Fixes


## <a id='known-issues'></a> Known Issues

### <a id="external-credhub"></a> CredHub Database Cannot Be External on GCP

If your PAS deployment is on GCP and you want to use Runtime CredHub, you must select **PAS database** for your CredHub database and **Internal** for your system database. If you are using external system databases, you cannot use CredHub.

CredHub is not compatible with the external database option on GCP. GCP Cloud SQL presents its certificate in a way that CredHub refuses to connect to it.

### <a id='tcp-port-config'></a> Configuring Multiple TCP Routing Ports

This section describes an issue and workaround related to configuring multiple TCP Routing Ports in the PAS tile UI.

#### Issue

You cannot enter a comma-separated list of ports in the **TCP Routing Ports** field of the PAS tile. If you enter a comma-separated list, the Routing API does not start. The **TCP Routing Ports** field allows entries in the following formats:

* A single value, such as `1234`
* A range of values, such as `1234-5678`

#### Workaround

If you want to configure multiple ports, do the following:

<p class="note"><strong>Note:</strong> This procedure causes brief downtime for TCP apps listening on ports that you open after deploying PAS.</p>

1. Configure PAS with **Enable TCP Routing** selected.

1. Enter one port you want to use in the **TCP Routing Ports** field.

1. Deploy PAS.

1. Use the Routing API to add all desired TCP ports by following the instructions in the [Modify your TCP ports](https://docs.pivotal.io/pivotalcf/1-12/adminguide/enabling-tcp-routing.html#modify-ports) section of the _Enabling TCP Routing_ topic. When using the Routing API, you can include a comma separated list of ports.

### <a id='cf-networking-downtime'></a> API Downtime During Rolling Deploys

Operators intermittently receive errors when pushing apps during a rolling upgrade.

### <a id="loggregator-scaling"></a> Loggregator Component Horizontal Scaling Thresholds

Above approximately 40 Doppler instances and 20 Traffic Controller instances, horizontal scaling is no longer useful for improving Loggregator Firehose performance. To improve performance, increase CPU resources for the existing Doppler and Traffic Controller instances to add vertical scale.
